{% load static %}
<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Gráfico de Tareas</title>
    <script src="https://code.highcharts.com/highcharts.js"></script>
    <script src="https://code.highcharts.com/modules/exporting.js"></script>
    <script src="https://code.highcharts.com/modules/accessibility.js"></script>

    <script src="https://code.highcharts.com/modules/export-data.js"></script>

    <!-- Incluye los archivos CSS de Bootstrap -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <!-- Incluye los archivos CSS de Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
</head>
<body>
    <div class="container mt-5">
        <a href="{% url 'admin:index' %}" class="text-decoration-none">
            <h1 class="display-4">
                <i class="fas fa-cogs text-primary"></i> Sistema de Gestión de Tareas Cambaceres
            </h1>
        </a>
    </div>
    <style>
        .chart-container {
            display: flex;
            justify-content: space-between; /* Adjust alignment as needed */
        }    
        .chart-container > div {
            width: 30%; /* Adjust the width as needed */
            margin: 0 1%; /* Adjust the margin as needed */
        }
    </style>
    <div class="chart-container">
        <! CONTENEDOR TAREAS POR ESTADO -->
        {% comment %} <div> {% endcomment %}
            <div id="container"></div>
            <script type="application/javascript">
            Highcharts.chart('container', {
                chart: {
                    type: 'column'
                },
                title: {
                    text: 'Tareas por Estado',
                    align: 'center'
                },
                subtitle: {
                    text:
                        '',
                    align: 'center'
                },
                xAxis: {
                    categories: ['Completada', 'Pendiente', 'En Proceso'],
                    crosshair: true,
                    accessibility: {
                        description: 'Estados'
                    }
                },
                yAxis: {
                    min: 0,
                    title: {
                        text: 'Cantidad de tareas'
                    }
                },
                tooltip: {
                    valueSuffix: ' Tareas'
                },
                plotOptions: {
                    column: {
                        pointPadding: 0.2,
                        borderWidth: 0,
                        {% comment %} colorBycoloPoint: true {% endcomment %}
                    }
                },
                
                series: [
                    {
                        name: '',
                        data: [{
                            name: 'Point 1',
                            color: '#00FF00',
                            y: {{totales_por_estado.0}}
                        }, {
                            name: 'Point 2',
                            color: 'red',
                            y: {{totales_por_estado.1}}
                        },
                        {
                            name: 'Point 2',
                            color: 'yellow',
                            y: {{totales_por_estado.2}}
                        }],
                    }
                ]
            });
            </script>
        {% comment %} </div> {% endcomment %}
        <! FIN CONTENEDOR TAREAS POR ESTADO  -->
        <hr>
        <! CONTENEDOR TAREAS POR TIPO  -->
        {% comment %} <div> {% endcomment %}
            <div id="containerdos"></div>
            <script type="application/javascript">
            Highcharts.chart('containerdos', {
                chart: {
                    type: 'column'
                },
                title: {
                    text: 'Tareas por Tipo',
                    align: 'center'
                },
                subtitle: {
                    text:
                        '',
                    align: 'center'
                },
                xAxis: {
                    categories: ['Corretiva', 'Preventiva', 'Predictiva', 'Otro'],
                    crosshair: true,
                    accessibility: {
                        description: ''
                    }
                },
                yAxis: {
                    min: 0,
                    title: {
                        text: 'Cantidad de tareas'
                    }
                },
                tooltip: {
                    valueSuffix: ' Tareas'
                },
                plotOptions: {
                    column: {
                        pointPadding: 0.2,
                        borderWidth: 0,
                        colorByPoint: true
                    }
                },
                series: [
                    {
                        name: '',
                        data: {{ totales_por_tipo }}
                    }
                ]
            });
            </script>
        {% comment %} </div> {% endcomment %}
        <! FIN CONTENEDOR TAREAS POR TIPO  -->
        <hr>
        <! CONTENEDOR TAREAS POR PRIORIDAD  -->
        {% comment %} <div> {% endcomment %}
            <div id="containertres"></div>
            <script type="application/javascript">
            Highcharts.chart('containertres', {
            chart: {
                type: 'column'
            },
            title: {
                text: 'Tareas por Prioridad',
                align: 'center'
            },
            subtitle: {
                text:
                    '',
                align: 'center'
            },
            xAxis: {
                categories: ['Alta', 'Baja', 'Media'],
                crosshair: true,
                accessibility: {
                    description: ''
                }
            },
            yAxis: {
                min: 0,
                title: {
                    text: 'Cantidad de tareas'
                }
            },
            tooltip: {
                valueSuffix: ' Tareas'
            },
            plotOptions: {
                column: {
                    pointPadding: 0.2,
                    borderWidth: 0,
                    colorByPoint: true
                }
            },
            series: [
                {
                    name: '',
                    data: [{
                        name: 'Point 1',
                        color: 'red',
                        y: {{totales_por_prioridad.0}}
                    }, {
                        name: 'Point 2',
                        color: '#00FF00',
                        y: {{totales_por_prioridad.1}}
                    },
                    {
                        name: 'Point 2',
                        color: 'yellow',
                        y: {{totales_por_prioridad.2}}
                    }],
                }
            ]
            });
            </script>  
        {% comment %} </div> {% endcomment %}
        <! FIN CONTENEDOR TAREAS POR PRIORIDAD  -->
    </div>

    <! CONTENEDOR GRAFICOS PIE  -->
    <figure class="highcharts-figure">
        <div id="containerpie"></div>
        <p class="highcharts-description">
            Gráfico con todas las tareas.
        </p>
    </figure>
    <script>
        Highcharts.chart('containerpie', {
            chart: {
                type: 'pie'
            },
            title: {
                text: {{total_tareas}} +' Tareas'
            },
            tooltip: {
                valueSuffix: '%'
            },
            subtitle: {
                text:
                ''
            },
            plotOptions: {
                series: {
                    allowPointSelect: true,
                    cursor: 'pointer',
                    dataLabels: [{
                        enabled: true,
                        distance: 20
                    }, {
                        enabled: true,
                        distance: -40,
                        format: '{point.percentage:.1f}%',
                        style: {
                            fontSize: '1.2em',
                            textOutline: 'none',
                            opacity: 0.7
                        },
                        filter: {
                            operator: '>',
                            property: 'percentage',
                            value: 10
                        }
                    }]
                }
            },
            series: [
                {
                    name: 'Porcentage',
                    colorByPoint: true,
                    data: [
                        {
                            name: 'Agua',
                            y: 55.02
                        },
                        {
                            name: 'Fat',
                            sliced: true,
                            selected: true,
                            y: 26.71
                        },
                        {
                            name: 'Carbohydrates',
                            y: 1.09
                        },
                        {
                            name: 'Protein',
                            y: 15.5
                        },
                        {
                            name: 'Ash',
                            y: 1.68
                        }
                    ]
                }
            ]
        });
    </script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>