{% load static %}
<!DOCTYPE html>
<html>
<head>
    <title>Gráfico de Tareas</title>
    <script src="https://code.highcharts.com/highcharts.js"></script>
    <script src="https://code.highcharts.com/modules/exporting.js"></script>
    <script src="https://code.highcharts.com/modules/export-data.js"></script>
    <script src="https://code.highcharts.com/modules/accessibility.js"></script>

    <figure class="highcharts-figure">
        <div id="containerpie"></div>
        <p class="highcharts-description">
            Pie charts are very popular for showing a compact overview of a
            composition or comparison. While they can be harder to read than
            column charts, they remain a popular choice for small datasets.
        </p>
    </figure>
</head>
<body>
    <div>
        <ul class="object-tools">
            <li>
                <a href="{% url 'admin:index' %}" class="addlink">
                    <img src="{% static 'admin/img/icon-changelink.svg' %}" alt="Redirigir a Otra Página">
                    Sistema de gestión de tareas
                </a>
            </li>
        </ul>
    </div>
    <style>
        .chart-container {
            display: flex;
            justify-content: space-between; /* Adjust alignment as needed */
        }    
        .chart-container > div {
            width: 30%; /* Adjust the width as needed */
            margin: 0 1%; /* Adjust the margin as needed */
        }
    </style>
    <div class="chart-container">
        <! CONTENEDOR TAREAS POR ESTADO -->
        {% comment %} <div> {% endcomment %}
            <div id="container"></div>
            <script type="application/javascript">
            Highcharts.chart('container', {
                chart: {
                    type: 'column'
                },
                title: {
                    text: 'Tareas por Estado',
                    align: 'center'
                },
                subtitle: {
                    text:
                        'Source: Envaplast Cambaceres',
                    align: 'center'
                },
                xAxis: {
                    categories: ['Completada', 'Pendiente', 'En Proceso'],
                    crosshair: true,
                    accessibility: {
                        description: 'Estados'
                    }
                },
                yAxis: {
                    min: 0,
                    title: {
                        text: 'Cantidad de tareas'
                    }
                },
                tooltip: {
                    valueSuffix: ' (UNIDAD)'
                },
                plotOptions: {
                    column: {
                        pointPadding: 0.2,
                        borderWidth: 0,
                        colorByPoint: true
                    }
                },
                series: [
                    {
                        name: 'Estados',
                        data: {{ totales_por_estado }}
                    }
                ]
            });
            </script>
        {% comment %} </div> {% endcomment %}
        <! FIN CONTENEDOR TAREAS POR ESTADO  -->
        <hr>
        <! CONTENEDOR TAREAS POR TIPO  -->
        {% comment %} <div> {% endcomment %}
            <div id="containerdos"></div>
            <script type="application/javascript">
            Highcharts.chart('containerdos', {
                chart: {
                    type: 'column'
                },
                title: {
                    text: 'Tareas por Tipo',
                    align: 'center'
                },
                subtitle: {
                    text:
                        'Source: Envaplast Cambaceres',
                    align: 'center'
                },
                xAxis: {
                    categories: ['Corretiva', 'Preventiva', 'Predictiva', 'Otro'],
                    crosshair: true,
                    accessibility: {
                        description: 'Tipos'
                    }
                },
                yAxis: {
                    min: 0,
                    title: {
                        text: 'Cantidad de tareas'
                    }
                },
                tooltip: {
                    valueSuffix: ' (UNIDAD)'
                },
                plotOptions: {
                    column: {
                        pointPadding: 0.2,
                        borderWidth: 0,
                        colorByPoint: false
                    }
                },
                series: [
                    {
                        name: 'Tipos',
                        data: {{ totales_por_tipo }}
                    }
                ]
            });
            </script>
        {% comment %} </div> {% endcomment %}
        <! FIN CONTENEDOR TAREAS POR TIPO  -->
        <hr>
        <! CONTENEDOR TAREAS POR PRIORIDAD  -->
        {% comment %} <div> {% endcomment %}
            <div id="containertres"></div>
            <script type="application/javascript">
            Highcharts.chart('containertres', {
            chart: {
                type: 'column'
            },
            title: {
                text: 'Tareas por Prioridad',
                align: 'center'
            },
            subtitle: {
                text:
                    'Source: Envaplast Cambaceres',
                align: 'center'
            },
            xAxis: {
                categories: ['Alta', 'Baja', 'Media'],
                crosshair: true,
                accessibility: {
                    description: 'Tipos'
                }
            },
            yAxis: {
                min: 0,
                title: {
                    text: 'Cantidad de tareas'
                }
            },
            tooltip: {
                valueSuffix: ' (UNIDAD)'
            },
            plotOptions: {
                column: {
                    pointPadding: 0.2,
                    borderWidth: 0,
                    colorByPoint: true
                }
            },
            series: [
                {
                    name: 'Prioridad',
                    data: {{ totales_por_prioridad }}
                }
            ]
            });
            </script>  
        {% comment %} </div> {% endcomment %}
        <! FIN CONTENEDOR TAREAS POR PRIORIDAD  -->
    </div>

    <! CONTENEDOR GRAFICOS PIE  -->
        <scrip>
            Highcharts.chart('containerpie', {
                title: {
                    text: 'Sales of petroleum products March, Norway',
                    align: 'left'
                },
                xAxis: {
                    categories: ['Jet fuel', 'Duty-free diesel', 'Petrol', 'Diesel', 'Gas oil']
                },
                yAxis: {
                    title: {
                        text: 'Million liters'
                    }
                },
                tooltip: {
                    valueSuffix: ' million liters'
                },
                plotOptions: {
                    series: {
                        borderRadius: '25%'
                    }
                },
                series: [{
                    type: 'column',
                    name: '2020',
                    data: [59, 83, 65, 228, 184]
                }, {
                    type: 'column',
                    name: '2021',
                    data: [24, 79, 72, 240, 167]
                }, {
                    type: 'column',
                    name: '2022',
                    data: [58, 88, 75, 250, 176]
                }, {
                    type: 'line',
                    step: 'center',
                    name: 'Average',
                    data: [47, 83.33, 70.66, 239.33, 175.66],
                    marker: {
                        lineWidth: 2,
                        lineColor: Highcharts.getOptions().colors[3],
                        fillColor: 'white'
                    }
                }, {
                    type: 'pie',
                    name: 'Total',
                    data: [{
                        name: '2020',
                        y: 619,
                        color: Highcharts.getOptions().colors[0], // 2020 color
                        dataLabels: {
                            enabled: true,
                            distance: -50,
                            format: '{point.total} M',
                            style: {
                                fontSize: '15px'
                            }
                        }
                    }, {
                        name: '2021',
                        y: 586,
                        color: Highcharts.getOptions().colors[1] // 2021 color
                    }, {
                        name: '2022',
                        y: 647,
                        color: Highcharts.getOptions().colors[2] // 2022 color
                    }],
                    center: [75, 65],
                    size: 100,
                    innerSize: '70%',
                    showInLegend: false,
                    dataLabels: {
                        enabled: false
                    }
                }]
            });
        </script>
</body>
</html>